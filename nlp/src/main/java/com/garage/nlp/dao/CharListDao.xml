<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.garage.nlp.dao.CharListDao">
    <insert id="addCharRecord" parameterType="java.util.Map">
        insert into tb_char_list (icharacter, foreward, body, afterward, front_combine, after_combine) values
        <foreach collection="wordVectorListMap" index="key" item="valueList" separator=",">
            <foreach collection="valueList" item="item" separator=",">
                (#{key},#{item.foreWard},#{item.body},#{item.afterWard},#{item.frontCombine},
                #{item.afterCombine})
            </foreach>
        </foreach>
    </insert>
    <insert id="doWordStatistics" parameterType="java.util.Map">
        insert into tb_word_statistics (word_name, word_length, occurrence_times) values
        <foreach collection="bodyMap" index="key" item="item" separator=",">
            (#{key}, char_length(#{key}), #{item})
        </foreach>
        on duplicate key update
        occurrence_times = occurrence_times + VALUES(occurrence_times)
    </insert>
</mapper>